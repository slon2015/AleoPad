"use strict";(self.webpackChunkaleopad_ui=self.webpackChunkaleopad_ui||[]).push([[340],{8340:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var i=t(1413),r=t(9439),a=t(321),o=t(1640),c=t(2791),l=t(6106),u=t(914),s=t(650),d=t(2641),m="styles_row__LYdbW",h=t(1087),Z=t(8514),f=t(7654),k=t(184);var x=function(e){var n=function(e){return{launchId:(0,Z.mC)(e.launch.id),amount:e.amount,isClaimable:e.launch.claimStartBlock<=e.currentBlockHeight&&(0===e.launch.claimBlockDuration||e.launch.claimStartBlock+e.launch.claimBlockDuration>e.currentBlockHeight)}}(e),t=n.launchId,i=n.amount,r=n.isClaimable,a=function(e,n){return e.isSuccess&&e.data?{tokenDecimals:e.data.decimals,tokenName:(0,Z.f8)(e.data.name),tokenSymbol:(0,Z.f8)(e.data.symbol),id:e.data.id}:{tokenName:"Coin-".concat(n),tokenDecimals:6,tokenSymbol:"TKN"}}((0,Z.XV)(t),t),o=a.id,x=a.tokenName,j=a.tokenSymbol,v=a.tokenDecimals,y=e.onClaimClick,p=(0,c.useCallback)((function(){r&&o&&y((0,Z.mC)(o))}),[o,r,y]),b=0===i;return(0,k.jsxs)(l.Z,{className:m,align:"middle",children:[(0,k.jsx)(u.Z,{span:10,children:(0,k.jsx)(s.Z.Text,{children:x})}),(0,k.jsx)(u.Z,{span:6,children:(0,k.jsx)(f.$d,{amount:i,decimals:v,symbol:j})}),(0,k.jsx)(u.Z,{span:3,children:(0,k.jsx)(h.rU,{to:"/launches/".concat(t),children:"Launch"})}),(0,k.jsx)(u.Z,{span:5,children:r&&!b&&(0,k.jsx)(d.ZP,{type:"primary",onClick:p,children:"Claim"})})]})},j=t(7689),v=t(8656),y=t(1773);function p(e){var n=e.selectMode,t=e.currentMode;function i(e){n(e)}return(0,k.jsx)(l.Z,{justify:"center",children:(0,k.jsxs)(y.Z.Compact,{children:[(0,k.jsx)(d.ZP,{type:"public"===t?"primary":"default",onClick:function(){return i("public")},children:"Public"}),(0,k.jsx)(d.ZP,{type:"private"===t?"primary":"default",onClick:function(){return i("private")},children:"Private"})]})})}var b=t(183),C=t(4840);function B(e){return(0,k.jsx)(l.Z,{children:(0,k.jsx)(h.rU,{to:"/tokens/".concat((0,Z.mC)(e)),children:"See your token balance"})})}function g(e){var n=e.ticket,t=e.tokenId,i=(0,Z.ud)(t,B.bind(null,t),n),r=(0,Z.dQ)(t);return!i.loading&&i.enabled&&r.data?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(y.Z,{direction:"vertical",children:(0,k.jsxs)(C.Z,{title:"Claim token",layout:"vertical",children:[(0,k.jsx)(C.Z.Item,{children:(0,k.jsx)(p,{currentMode:i.privacy,selectMode:function(e){return i.setPrivacy(e)}})}),(0,k.jsx)(C.Z.Item,{children:(0,k.jsxs)(s.Z.Text,{children:["You will receive"," ",(0,k.jsx)(f.$d,{amount:n.amount,decimals:r.data.decimals,symbol:(0,Z.f8)(r.data.symbol)})]})}),(0,k.jsxs)(C.Z.Item,{children:[(0,k.jsx)(l.Z,{justify:"center",children:(0,k.jsx)(d.ZP,{type:"primary",disabled:!i.enabled&&!i.blocker&&!i.mutation.isLoading,onClick:function(){return i.mutation.mutate()},children:"Claim"})}),i.blocker&&(0,k.jsx)(l.Z,{children:(0,k.jsx)(s.Z.Text,{type:"danger",children:i.blocker})})]})]})})}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(b.Z,{})})}function I(e){var n=e.ticket,t=e.tokenId,i=e.onModalClose,r=Boolean(n);return(0,k.jsx)(v.Z,{open:r,onCancel:i,title:"Claim Launch ticket",footer:null,children:(0,k.jsx)(l.Z,{justify:"center",children:(0,k.jsx)(g,{ticket:n,tokenId:t})})})}var T=function(){var e=(0,Z.L0)(),n=(0,Z.hi)(),t=(0,j.UO)().launchId,l=(0,c.useState)(),u=(0,r.Z)(l,2),s=u[0],d=u[1],m=e.loading||"number"!==typeof n.blockHeight?[]:e.items.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{currentBlockHeight:n.blockHeight,onClaimClick:function(n){d((0,i.Z)((0,i.Z)({},e),{},{tokenId:n}))}})})).filter((function(e){return!t||(0,Z.mC)(e.launch.id)===(0,Z.mC)(t)}));return(0,k.jsxs)(a.Z,{title:"Tickets",children:[s&&(0,k.jsx)(I,{ticket:s,tokenId:s.tokenId,onModalClose:function(){return d(void 0)}}),(0,k.jsx)(o.Z,{bordered:!0,dataSource:m,renderItem:function(e){return(0,k.jsx)(o.Z.Item,{children:(0,k.jsx)(x,(0,i.Z)({},e))})}})]})}},7654:function(e,n,t){t.d(n,{$d:function(){return b},DU:function(){return m},T_:function(){return y}});var i=t(4942),r=t(1773),a=t(650),o=t(1694),c=t.n(o),l=t(2426),u=t.n(l),s={passed:"styles_passed__pVj6j"},d=t(184);function m(e){var n=e.currentBlockHeight,t=e.targetBlockHeight,o=e.meanBlockTimeInSeconds,l=e.dontShowBlocksCount,m=t-n,h=m<=0,Z=Boolean(o)&&o&&0!==m?"~ "+function(e,n,t){var i=t?" ago":"";return u().duration(Math.abs(e)*n,"seconds").humanize()+i}(m,o,h):"",f=l?"":"".concat(Math.abs(m)," Blocks ");return(0,d.jsx)(r.Z,{children:(0,d.jsxs)(a.Z.Text,{className:c()((0,i.Z)({},s.passed,h)),children:[f,Z]})})}var h=t(9439),Z=t(4471),f=t(2791);function k(e,n,t){return n!==t?(0,Z.Z)(e).dividedBy((0,Z.Z)(10).pow(Math.abs(n-t))):(0,Z.Z)(e)}var x=[{value:1e6,symbol:"M"},{value:1e3,symbol:"K"}];function j(e,n){for(var t=0;t<x.length;t++){var i=x[t];if((0,Z.Z)(e).isGreaterThanOrEqualTo(i.value))return n||0===n?(0,Z.Z)(e).div(i.value).toFixed(n)+i.symbol:(0,Z.Z)(e).div(i.value).toFixed()+i.symbol}return n||0===n?(0,Z.Z)(e).toFixed(n):(0,Z.Z)(e).toFixed()}var v=1e-4;function y(e){var n=e.ratioData,t=e.leftSymbol,i=e.leftDecimals,r=e.rightSymbol,o=e.rightDecimals,c=e.notInvertAmounts,l=e.creditsAmount,u=void 0===l?1:l,s=e.creditsDecimalPlaces,m=void 0===s?0:s,x=(0,f.useMemo)((function(){return k("value"in n?(0,Z.Z)(1).dividedBy(n.value):(e=n.numerator,t=n.denominator,(0,Z.Z)(e).div(t)),o,i);var e,t}),[n,o,i]),y=(0,f.useMemo)((function(){return!c&&x.isLessThanOrEqualTo(v)?function(e){return[(0,Z.Z)(1).dividedBy(e),(0,Z.Z)(1)]}(x):[(0,Z.Z)(1),(0,Z.Z)(x)]}),[x,c]),p=(0,h.Z)(y,2),b=p[0],C=p[1];return(0,d.jsxs)(a.Z.Text,{children:[j(b.multipliedBy(u),m)," ",r.toUpperCase()," ="," ",j(C.multipliedBy(u))," ",t.toUpperCase()]})}var p=t(8514);function b(e){var n=e.amount,t=e.decimals,i=e.symbol,r=(0,f.useMemo)((function(){return"object"===typeof(e=n)&&"numerator"in e?(0,Z.Z)(e.amount).multipliedBy(e.numerator).dividedBy(e.denominator):(0,Z.Z)(e);var e}),[n]);return(0,d.jsxs)(a.Z.Text,{children:[j((0,p.k8)(r,t))," ",i]})}}}]);
//# sourceMappingURL=340.dc042c61.chunk.js.map